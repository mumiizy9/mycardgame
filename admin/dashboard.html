<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin Dashboard | Card Game</title>
  <link rel="stylesheet" href="admin.css">
</head>
<body>
<div class="admin-shell">
  <!-- Header & Nav -->
  <header class="admin-header">
    <div class="admin-header-title">🛡️ Backoffice</div>
    <div id="admin-user-info"></div>
    <button id="admin-logout-btn" class="admin-logout-btn">🚪 ออกจากระบบ</button>
  </header>
  
  <nav class="admin-nav-tab">
    <button data-section="characters" class="tab-btn active">👤 ตัวละคร</button>
    <button data-section="gacha">🎲 กาชา</button>
    <button data-section="equipment">🗡️ อุปกรณ์</button>
    <button data-section="stage">🗺️ ด่าน</button>
    <button data-section="quest">🏆 เควส</button>
    <button data-section="shop">🛒 ร้านค้า</button>
    <button data-section="notify">📢 แจ้งเตือน</button>
  </nav>
  
  <main class="admin-main">
    <!-- CHARACTERS -->
    <section class="admin-pane visible" id="pane-characters">
      <h2>👤 ตัวละคร (characters.json)</h2>
      <div class="admin-action">
        <button id="add-character-btn" class="admin-add-btn">➕ เพิ่มตัวละคร</button>
        <button id="export-characters" class="admin-export-btn">💾 Export JSON</button>
      </div>
      <div id="table-characters"></div>
    </section>
    <!-- GACHA -->
    <section class="admin-pane" id="pane-gacha">
      <h2>🎲 กาชา (gacha.json)</h2>
      <div class="admin-action">
        <button id="add-gacha-btn" class="admin-add-btn">➕ เพิ่ม Pool</button>
        <button id="export-gacha" class="admin-export-btn">💾 Export JSON</button>
      </div>
      <div id="table-gacha"></div>
    </section>
    <!-- EQUIPMENT -->
    <section class="admin-pane" id="pane-equipment">
      <h2>🗡️ อุปกรณ์ (equipment.json)</h2>
      <div class="admin-action">
        <button id="add-equipment-btn" class="admin-add-btn">➕ เพิ่มอุปกรณ์</button>
        <button id="export-equipment" class="admin-export-btn">💾 Export JSON</button>
      </div>
      <div id="table-equipment"></div>
    </section>
    <!-- STAGE -->
    <section class="admin-pane" id="pane-stage">
      <h2>🗺️ ด่าน/World (stages.json)</h2>
      <div class="admin-action">
        <button id="add-stage-btn" class="admin-add-btn">➕ เพิ่ม World/Stage</button>
        <button id="export-stage" class="admin-export-btn">💾 Export JSON</button>
      </div>
      <div id="table-stage"></div>
    </section>
    <!-- QUEST -->
    <section class="admin-pane" id="pane-quest">
      <h2>🏆 เควส (quests.json)</h2>
      <div class="admin-action">
        <button id="add-quest-btn" class="admin-add-btn">➕ เพิ่มเควส</button>
        <button id="export-quest" class="admin-export-btn">💾 Export JSON</button>
      </div>
      <div id="table-quest"></div>
    </section>
    <!-- SHOP -->
    <section class="admin-pane" id="pane-shop">
      <h2>🛒 ร้านค้า (shop.json)</h2>
      <div class="admin-action">
        <button id="add-shop-btn" class="admin-add-btn">➕ เพิ่มสินค้า</button>
        <button id="export-shop" class="admin-export-btn">💾 Export JSON</button>
      </div>
      <div id="table-shop"></div>
    </section>
    <!-- NOTIFY -->
    <section class="admin-pane" id="pane-notify">
      <h2>📢 ประกาศ/แจ้งเตือน (FriendEventUI.js)</h2>
      <div class="admin-action">
        <button id="add-notify-btn" class="admin-add-btn">➕ เพิ่มประกาศ/ข่าว</button>
        <button id="export-notify" class="admin-export-btn">💾 Export JSON</button>
      </div>
      <div id="table-notify"></div>
    </section>
  </main>

  <footer class="admin-footer">
    Card Game Admin Dashboard &copy; 2024 | <span id="admin-footer-user"></span>
  </footer>
</div>
<script src="admin.js"></script>
<script>
  // Session guard
  if (!sessionStorage.getItem('isAdmin')) {
    alert('กรุณาเข้าสู่ระบบแอดมิน');
    window.location = 'login.html';
  }
  // User Info
  const user = sessionStorage.getItem('adminUser');
  document.getElementById('admin-user-info').textContent = '👤 '+user;
  document.getElementById('admin-footer-user').textContent = 'ผู้ดูแล: '+user;
  document.getElementById('admin-logout-btn').addEventListener('click', function(){
    sessionStorage.clear();
    window.location = 'login.html';
  });
  // Section Switch
  document.querySelectorAll('.tab-btn').forEach(btn=>{
    btn.onclick = function() {
      document.querySelectorAll('.admin-pane').forEach(sec => sec.classList.remove('visible'));
      document.getElementById('pane-'+btn.dataset.section).classList.add('visible');
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
    }
  });
</script>
</body>
</html>
